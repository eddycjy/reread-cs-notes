---
title: TCP
type: docs
---


# 2.2 TCP 

## 2.2.1 什么是 TCP

TCP 是一种面向连接的、可靠的字节流服务的单播协议，它在 OSI 模型中位处传输层，原始规范是 [RFC0793](https://tools.ietf.org/html/rfc793)。

### 2.2.1.1 什么是面向连接

指的是使用 TCP 的两个应用程序必须在它们可交换数据之前，通过相互联系来建立一个 TCP 连接。

就像你平时拨打一个电话号码，等待对方接听电话并说 “喂”，然后再说 “找谁”。这正是一个 TCP 连接的两个端点在互相通讯，需要互相通讯并确认存在后才能建立 TCP 连接。

### 2.2.1.2 什么是可靠的

- TCP 维持了一个强制的校验和，用于检测传送中引入的比特差错，如果一个无效检验和的报文段到底，TCP 将会丢弃它，并且不会发送任何的确认（ACK）。
- TCP 发送一组报文段时，会设置一个重传计时器，等待对方的确认接收。
- TCP 在接收到连接的另一端的数据时，会发送一个确认（ACK）作为表示自己接收到的标识。
- TCP 是全双工的，也就是说数据可以向两个方向流动。

### 2.2.1.3 什么是字节流

字节流是 TCP 中提供的一种抽象概念。

### 2.2.1.4 什么是单播协议

指的是信息的接受和传递只在两个节点进行，也就是主机间的 “一对一” 的通讯模式。

## 2.2.2 TCP 头部和封装

### 2.2.2.1 IP 数据报

![image](../../../images/ip-pack.jpg)

## TCP 滑动窗口

### 什么是滑动窗口

![image](../../../images/screen.jpg)

### 为什么需要滑动窗口

#### 为了提高速度

TCP 每发一个段就要进行一次确认应答（ACK）的处理，这样子的传输方式就会导致包的往返时间越长，通信性能就越低。

![image](../../../images/no-screen.jpg)

就像上图，对每一个数据包都进行了应答处理，这样子包的往返时间就会变长，开销自然也就变大了，整体的网络吞吐量就更差了。

#### 为了控制数据包的量

## TCP 重发机制

## TCP 是如何落实可靠性的